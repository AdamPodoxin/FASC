<!DOCTYPE html>
<!-- page that opens if user chooses to host -->
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <link href="./styles.css" rel="stylesheet">
    <title>Find a Stronger Computer</title>
  </head>
  <body>
    <script type = "text/javascript">
        function processAndReturn(fileName)
        {
          // Automatically download file
          console.log("Downloading...");
          document.location.href = fileName;

          // Run shell command to compile
          const execSync = require('child_process').execSync;
          console.log("Compiling...");
          const output = execSync('gcc -o ${fileName} ${fileName}.c', { encoding: 'utf-8' });  // the default is 'buffer'
          
          // Send back
          return output;
        }

        // When a file is sent
        var fileName = "whateverthefuckAdamissendingme.c";
        processAndReturn(fileName);
    </script>
    Waiting...
    
    <script src="./renderer.js"></script>
  </body>
</html>